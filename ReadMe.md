## ä½¿ç”¨æ–‡æ¡£

æ•™ç¨‹æ¥æºï¼š[ã€æ°å“¥è¯¾å ‚ã€‘-é¡¹ç›®å®æˆ˜-Node+Koa2ä»é›¶æ­å»ºé€šç”¨APIæœåŠ¡_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV13A411w79h?p=3)
æºç ï¼šhttps://github.com/jj112358/node-api

æ„Ÿè°¢UP

ğŸ±ğŸ±ğŸ˜˜ğŸ˜ğŸ™ğŸ¦ªğŸšğŸ¥®ğŸ¥ğŸ«•ğŸ¥§



## ç›®å½•ç»“æ„ï¼š

![image-20220408204350963](C:\Users\aafz\AppData\Roaming\Typora\typora-user-images\image-20220408204350963.png)

## ä½¿ç”¨æ–¹å¼ï¼š

```
#å®‰è£…ä¾èµ–
$npm install

#è°ƒè¯•è¿è¡Œ
$npm run dev

#
$
```



### æ¥å£ï¼š
ï¼ˆæ¥å£ä¸å¤šï¼Œå°±ç›´æ¥å†™åœ¨è¿™é‡Œäº†ï¼‰

baseURLï¼šlocalhost:####



##### ç”¨æˆ·æ¥å£    `/user`

**ç™»å½•æ¥å£**
`/login`
æ–¹æ³•ï¼špost
å‚æ•°ï¼š

```
{    "tel": "1234567891234",
     "password": "123"		}
```

**è·å–ç”¨æˆ·ä¿¡æ¯**
`/getMessage`
æ–¹æ³•ï¼šget

**ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯**
`/changeMessage`
æ–¹æ³•ï¼špost
å‚æ•°ï¼š

```
{   "tel": "1234567891234",
    "name": "syney",
    "wx": "wx123456",
    "sex": "å¥³"				}
```

**æ”¹å¯†ç **
`/changePWD`
æ–¹æ³•ï¼špost
å‚æ•°ï¼š
```
{   "tel": "1234567891234",
    "password":"123456789",
    "newPWD":"123456"		}
```



##### å·¥å•æ¥å£   `/wo`

**å¢åŠ å·¥å•**
`/addWO`
æ–¹æ³•ï¼špost
å‚æ•°ï¼š

```
{   "name": "æ—¶åŒºæµ‹è¯•2",
    "level":"ä¸æ€¥",
 	"description":"descriptionsbfajbfjsabfjsabf",
    "site_id":"2"	}
```

**è·å–ä¸ªäººçš„å·¥å•åˆ—è¡¨**
`/getPersonWOs`
æ–¹æ³•ï¼šget

**è·å–å·¥å•è¯¦æƒ…**
`/getWO/:id`
æ–¹æ³•ï¼šget

**ä¿®æ”¹å·¥å•**
`/changeWO`
æ–¹æ³•ï¼špost
å‚æ•°ï¼š

```
{   "id":"2",
    "message":"å¤„ç†å®Œæˆæè¿°æµ‹è¯•1"	}
```



##### ç«™ç‚¹æ¥å£  `/site`

**è·å–ç«™ç‚¹åˆ—è¡¨**
`/getSiteList`
æ–¹æ³•ï¼šget

**è·å–ç«™ç‚¹ç»†èŠ‚**
`/getSiteDetail/:id`
æ–¹æ³•ï¼šget

**ä¿®æ”¹ç«™ç‚¹çŠ¶æ€**
`/changeSiteStatus`
æ–¹æ³•ï¼špost
å‚æ•°ï¼š
```
{   "id":"2",
    "status":"å·²å¯ç”¨"	}
```



##### å·¡æ£€æ¥å£	`/inspect`

**è·å–ä¸ªäººçš„å·¡æ£€åˆ—è¡¨**
`/getPersonInsList`
æ–¹æ³•ï¼šget

**è·å–å·¡æ£€è¯¦æƒ…**
`/getInspect/:id`
æ–¹æ³•ï¼šget



##### è®¾å¤‡æ¥å£	`/device`

**è·å–æŸä¸ªç«™ç‚¹çš„è®¾å¤‡åˆ—è¡¨**
`/getDevList/:site_id`
æ–¹æ³•ï¼šget

**è·å–è®¾å¤‡è¯¦æƒ…**
`/getDevDetail/:dev_id`
æ–¹æ³•ï¼šget




## å­¦ä¹ ç¬”è®°1ï¼š

#### æ•™ç¨‹çš„ä½œè€…å·²ç»å†™å¾—å¾ˆæ¸…æ™°äº†ï¼Œåœ¨æ­¤ä¸å†è¿›è¡Œèµ˜è¿°ï¼Œæ›´å¤šçš„æ˜¯æ¢³ç†æ•´ä¸ªé¡¹ç›®æŠ½ç¦»çš„å„ä¸ªä¾èµ–ä¹‹é—´çš„å…³ç³»å’Œé€»è¾‘

**å¯¹æ•´ä¸ªç™»å½•APIçš„æµç¨‹è¿›è¡Œè¯´æ˜ï¼š**

é¡¹ç›®äºæš‚æ—¶çš„ç›®å½•å¦‚ä¸‹ï¼š

åšäº†ä¸€ä»½ä¾èµ–çš„æ€ç»´å¯¼å›¾

æ–‡æ¡£é“¾æ¥ï¼š

![image-20220323151939768](C:\Users\aafz\AppData\Roaming\Typora\typora-user-images\image-20220323151939768.png)

![image-20220323152031358](C:\Users\aafz\AppData\Roaming\Typora\typora-user-images\image-20220323152031358.png)

![image-20220323152054875](C:\Users\aafz\AppData\Roaming\Typora\typora-user-images\image-20220323152054875.png)



## å­¦ä¹ ç¬”è®°2ï¼š

##### 22.4.5	åŸºæœ¬å®Œæˆäº†æ•°æ®çš„ä¼ é€’åŠŸèƒ½ï¼Œä¸­é—´ä»¶ä¹‹åå†æ·»åŠ ï¼Œè¿˜æœ‰è®¸å¤šéœ€è¦å®Œæˆçš„ä¸­é—´ä»¶ï¼Œå·¥å…·ç±»ï¼Œå„ç§æŠ½ç¦»çš„ä»£ç éƒ¨åˆ†
